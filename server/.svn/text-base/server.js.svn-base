var http = require('http');
var url = require('url');
var log = require('../common/log4js/log').getLogger('web.access');
var CFG = require('../config').WEB_SERVER;

module.exports.start = function(route) {

    http.createServer(function(req, res) {
        var act = url.parse(req.url).pathname;
                    
        req.on('end', function() { 
            log.info(req.url + ' finish!');
        });

        route(act, res, req);

    }).listen(CFG.PORT);

    console.log('DIANSAN TASK CENTER');
    console.log('@Copyright www.diansan.com');
    console.log('Server running at ' + CFG.PORT);
}
